// ==UserScript==
// @name = UniReshExploit
// @description Этот эксплоит актуален для РЭШ на 2020 год. Эксплуатируется на всех предметах с 1 по 11 класс включительно за несколькими исключениями. Также при его использовании могут возникать баги сайта, такие как многократное повторение элементов на странице
// @author Alex Sky (PytHaCk)
// @License MIT
// @version 1.9
// @include https://resh.edu.ru/subject/lesson/*
// ==/UserScript==
(function (window, undefined) {
    var w;
    if (typeof unsafeWindow != undefined) {
        w = unsafeWindow
    } else {
        w = window;
    }
    if (w.self != w.top) {
        return;
    }
    if (/https:\/\/resh.edu.ru\/subject\/lesson/.test(w.location.href)) {
        //Здесь начало кода
        if (document.getElementsByClassName('_tabs__tab').item(0).innerHTML == 'Конспект') {
            alert("На этом уроке скрипт может работать не корректно!")
        }
        function Show() {
            document.getElementsByClassName("lk-form-submit js-show-answer").item(0).innerHTML = "Ускориться";
            document.getElementsByClassName("lk-form-submit js-show-answer").item(0).style = "display";
        }
        function Exploit() {
            document.getElementsByClassName('test__buttons-line').item(0).insertAdjacentHTML('afterbegin', '<a href="javascript:void(0)" class="lk-form-submit js-show-answer"></a>');
            let s = document.createElement('script');
            s.src="/custom/js/lesson/version2/train.js";
            s.type="module";
            (document.head||document.documentElement).appendChild(s);
            Show();
        }
        if (!document.getElementsByClassName('lk-form-submit js-show-answer').item(0)) {
            Exploit()
        }
        else {
            Show()
        }
        document.getElementsByClassName('lk-form-submit js-finish').item(0).style = "display"
        //Здесь конец кода
    }
})(window);
